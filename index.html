<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>처음처럼</title>
  <meta name="description" content="잊고 지냈던 순간을 다시 떠올릴 수 있게, 조용히 질문 하나를 건넵니다." />
  <link rel="canonical" href="https://happy.funnyfunny.cloud/" />
  <meta property="og:title" content="처음처럼" />
  <meta property="og:description" content="잊고 지냈던 순간을 다시 떠올릴 수 있게, 조용히 질문 하나를 건넵니다." />
  <meta property="og:type" content="website" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><rect width='64' height='64' rx='14' fill='%23f5f0e8'/><text x='32' y='42' text-anchor='middle' font-size='28' fill='%238b7355'>처</text></svg>" />
  <style>
    :root {
      --bg: #faf8f5;
      --panel: #ffffff;
      --text: #2c2416;
      --muted: #6b5d4f;
      --border: #e8e0d6;
      --accent: #8b7355;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Apple SD Gothic Neo", "Noto Sans KR", -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }
    .wrap { max-width: 480px; margin: 0 auto; padding: 24px 20px 48px; }
    .screen { display: none; }
    .screen.active { display: block; }

    .step-text {
      font-size: 17px;
      line-height: 1.7;
      color: var(--text);
      margin: 0 0 24px;
    }
    .step-text.muted { color: var(--muted); font-size: 14px; }
    .step-text.lead { font-size: 18px; line-height: 1.65; }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 14px 24px;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      border: 1px solid var(--border);
      background: var(--panel);
      color: var(--text);
      text-decoration: none;
      transition: background 0.2s, border-color 0.2s;
    }
    .btn:hover { background: #f5f0ea; border-color: var(--accent); }
    .btn.primary { background: var(--accent); color: #fff; border-color: var(--accent); }
    .btn.primary:hover { background: #7a6348; }
    .btn.ghost { background: transparent; }
    .btn-block { width: 100%; }

    .question-box {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 28px 24px;
      margin: 24px 0;
    }
    .question-box h2 {
      margin: 0 0 20px;
      font-size: 18px;
      font-weight: 500;
      line-height: 1.5;
      color: var(--text);
    }
    textarea.answer {
      width: 100%;
      min-height: 80px;
      padding: 14px;
      border: 1px solid var(--border);
      border-radius: 10px;
      font-size: 15px;
      font-family: inherit;
      resize: vertical;
      background: var(--bg);
    }
    textarea.answer:focus { outline: none; border-color: var(--accent); }
    .placeholder-hint { font-size: 13px; color: var(--muted); margin-top: 8px; }
    .btn-row { display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap; }
    .btn-row .btn { flex: 1; min-width: 120px; }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .logo { font-size: 18px; font-weight: 600; color: var(--text); }
    .menu-btn {
      padding: 8px 12px;
      font-size: 13px;
      background: transparent;
      border: none;
      color: var(--muted);
      cursor: pointer;
    }
    .menu-btn:hover { color: var(--text); }

    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.3);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
      padding: 20px;
    }
    .modal-overlay.show { display: flex; }
    .modal {
      background: var(--panel);
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 20px 50px rgba(0,0,0,0.15);
    }
    .modal h3 { margin: 0 0 12px; font-size: 16px; }
    .modal p { margin: 0 0 20px; font-size: 14px; color: var(--muted); line-height: 1.6; }
    .modal .btn-row { margin-top: 16px; }

    .records-list { margin: 16px 0; }
    .record-item {
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
      font-size: 14px;
      color: var(--muted);
    }
    .record-item:last-child { border-bottom: none; }
    .record-item .date { font-weight: 500; color: var(--text); }
    .record-item .preview { margin-top: 4px; color: var(--muted); font-size: 13px; max-height: 2.4em; overflow: hidden; }
    .record-detail { padding: 20px 0; }
    .record-detail .q { font-size: 15px; margin-bottom: 12px; color: var(--muted); }
    .record-detail .a { font-size: 16px; line-height: 1.6; }

    .footer { margin-top: 40px; text-align: center; }
    .footer a { color: var(--muted); font-size: 13px; }
    .footer a:hover { color: var(--accent); }
    .ethics {
      margin-top: 24px;
      padding: 16px;
      background: #f8f5f0;
      border-radius: 12px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.7;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- STEP 1: First sentence -->
    <div class="screen active" id="step1">
      <p class="step-text lead">
        행복은 사라지는 게 아니라<br />
        오래 곁에 있으면<br />
        잘 느껴지지 않게 됩니다.
      </p>
      <button class="btn btn-block primary" onclick="nextStep(2)">계속 읽어보기</button>
    </div>

    <!-- STEP 2: Declaration -->
    <div class="screen" id="step2">
      <p class="step-text">
        이곳은<br />
        더 행복해지기 위한 곳이 아닙니다.
      </p>
      <p class="step-text">
        당연해져서 잘 느끼지 못하게 된 순간들을<br />
        다시 바라볼 수 있도록<br />
        질문 하나를 건넵니다.
      </p>
      <button class="btn btn-block primary" onclick="nextStep(3)">계속 읽어보기</button>
    </div>

    <!-- STEP 3: Minimal guide -->
    <div class="screen" id="step3">
      <p class="step-text muted">
        처음 오셨다면,<br />
        지금은 읽기만 하셔도 괜찮습니다.
      </p>
      <button class="btn btn-block primary" onclick="nextStep(4)">계속 읽어보기</button>
    </div>

    <!-- STEP 4: Question preview -->
    <div class="screen" id="step4">
      <p class="step-text">
        이곳의 질문은<br />
        답을 잘 쓰기 위한 것이 아닙니다.
      </p>
      <p class="step-text">
        오늘 하루 중 어디선가 한 번쯤<br />
        떠올라도 충분합니다.
      </p>
      <button class="btn btn-block primary" onclick="nextStep(5)">오늘의 질문 보기</button>
    </div>

    <!-- STEP 5 / Main: Today's question -->
    <div class="screen" id="step5">
      <div class="header">
        <span class="logo">처음처럼</span>
        <button class="menu-btn" onclick="openMenu()">☰</button>
      </div>

      <div class="question-box">
        <h2 id="questionText"></h2>
        <textarea class="answer" id="answerInput" placeholder="길게 쓰지 않아도 됩니다."></textarea>
        <p class="placeholder-hint">적지 않아도 괜찮습니다. 하루 중 한 번쯤 떠올려 보시면 됩니다.</p>
        <div class="btn-row">
          <button class="btn primary" onclick="saveAndDone()">기록하기</button>
          <button class="btn ghost" onclick="skipToday()">오늘은 넘깁니다</button>
        </div>
      </div>

      <div class="footer">
        <a href="https://funnyfunny.cloud" target="_blank" rel="noopener">다른 서비스 보기</a>
        <div class="ethics">
          처음처럼은 당신의 기록을 분석하지 않습니다.<br />
          저장하지도, 보내지도, 판단하지도 않습니다.<br />
          이곳에 남긴 말들은 당신의 브라우저 안에만 머뭅니다.
        </div>
      </div>
    </div>
  </div>

  <!-- Menu modal -->
  <div class="modal-overlay" id="menuModal" onclick="if(event.target===this)closeMenu()">
    <div class="modal">
      <h3>기록에 대해</h3>
      <p>이 기록들은 과거의 당신이 지금의 당신을 위해 남긴 것이 아닐 수도 있습니다. 그래도 괜찮으시다면 천천히 열어보셔도 됩니다.</p>
      <div class="btn-row">
        <button class="btn primary" onclick="viewRecords()">기록 보기</button>
        <button class="btn ghost" onclick="closeMenu(); exportData()">백업 내보내기</button>
        <button class="btn ghost" onclick="closeMenu()">지금은 돌아가기</button>
      </div>
    </div>
  </div>

  <!-- Records list modal -->
  <div class="modal-overlay" id="recordsModal" onclick="if(event.target===this)closeRecords()">
    <div class="modal" style="max-height:80vh;overflow:auto">
      <h3>내가 남긴 기록</h3>
      <div id="recordsList" class="records-list"></div>
      <div class="btn-row">
        <button class="btn ghost" onclick="closeRecords()">닫기</button>
      </div>
    </div>
  </div>

  <script>
    const LS = {
      RECORDS: "cheoreomcheoreom_records",
      META: "cheoreomcheoreom_meta",
      ONBOARDING: "cheoreomcheoreom_onboarding"
    };

    const FIXED_7 = [
      "요즘, 예전보다 마음이 무거워진 사람이나 일이 있나요?",
      "그것이 처음 시작됐을 때도 지금과 같은 감정이었나요?",
      "처음엔, 왜 그것을 선택하셨나요?",
      "그때의 당신은 지금보다 어떤 사람이었나요?",
      "처음엔 당연하지 않았던 게 지금은 무엇인가요?",
      "혹시 지금도, 아주 조금은 남아 있는 게 있나요?",
      "오늘 하루, 그 '조금'을 완전히 없애지 않기 위해 하지 않아도 될 행동 하나가 있다면 무엇일까요?"
    ];

    const LEVEL_0 = [
      "오늘 하루 중, 가장 조용했던 순간은 언제였나요?",
      "요즘 자주 미루고 있는 건 무엇인가요?",
      "오늘 가장 먼저 떠오른 생각은 무엇이었나요?",
      "요즘, 이유 없이 피하고 있는 게 있나요?",
      "오늘 하루를 한 단어로 말한다면요?",
      "최근에 웃었던 건 언제였나요?",
      "요즘 유난히 귀찮게 느껴지는 일은 무엇인가요?",
      "오늘, 굳이 하지 않아도 됐던 일은 뭐였을까요?",
      "최근 가장 자주 드는 감정은 무엇인가요?",
      "오늘 하루, 조금 과했던 부분이 있나요?",
      "요즘 가장 많이 쓰는 말은 무엇인가요?",
      "오늘 하루 중 가장 빨리 지나간 순간은 언제였나요?",
      "요즘, 예전보다 덜 중요해진 건 무엇인가요?",
      "오늘 하루, 가장 늦게 떠올린 사람은 누구였나요?",
      "요즘 자주 피곤해지는 이유는 무엇일까요?",
      "오늘, 굳이 설명하지 않아도 됐던 순간은 있었나요?",
      "최근 가장 많이 생각난 장소는 어디인가요?",
      "오늘 하루, 가장 크게 숨을 쉰 순간은 언제였나요?",
      "요즘 가장 무난하게 넘기고 있는 일은 무엇인가요?",
      "오늘 하루, 가장 조심했던 말은 무엇이었나요?",
      "최근 가장 자주 반복되는 하루의 장면은 무엇인가요?",
      "오늘 하루, 괜히 서둘렀던 순간이 있나요?",
      "요즘 가장 덜 신경 쓰게 된 건 무엇인가요?",
      "오늘 하루, 혼자 있고 싶었던 순간은 언제였나요?",
      "최근 가장 자주 떠올린 걱정은 무엇인가요?",
      "오늘 하루, 가장 짧았던 감정은 무엇이었나요?",
      "요즘, 예전만큼 신경 쓰지 않게 된 일은 무엇인가요?",
      "오늘 하루, 가장 무심했던 순간은 언제였나요?",
      "요즘 가장 자주 넘기는 감정은 무엇인가요?",
      "오늘 하루, 그냥 지나쳐도 괜찮았던 순간은 무엇이었나요?"
    ];

    const LEVEL_1 = [
      "처음엔, 지금과 다르게 느껴졌던 게 있나요?",
      "예전에는 더 중요하게 여겼던 것이 있었나요?",
      "처음엔 쉽게 했던 말이, 지금은 어려워진 게 있나요?",
      "예전의 당신이라면, 지금 상황을 어떻게 봤을까요?",
      "처음엔, 이유 없이 좋았던 순간이 있었나요?",
      "예전에는 당연히 하던 행동이, 요즘은 부담이 되었나요?",
      "처음 시작할 때, 가장 기대했던 건 무엇이었나요?",
      "예전엔 쉽게 웃을 수 있었던 이유가 있었나요?",
      "처음엔, 이 정도까지 될 거라고 생각하셨나요?",
      "예전에는 더 자주 확인하던 것이 있나요?",
      "처음엔, 이걸 잃을까 봐 두려웠던 적이 있었나요?",
      "예전의 당신은, 무엇을 가장 중요하게 여겼나요?",
      "처음엔, 설명하지 않아도 이해받던 게 있었나요?",
      "예전엔 괜찮았는데, 요즘은 힘들어진 이유는 뭘까요?",
      "처음엔, 그냥 좋아서 했던 행동이 있었나요?",
      "예전의 당신이라면, 지금의 선택을 이해할까요?",
      "처음엔, 결과보다 과정이 더 중요했던 적이 있나요?",
      "예전엔 쉽게 용서하던 순간이 있었나요?",
      "처음엔, 이만하면 충분하다고 느꼈던 적이 있나요?",
      "예전에는 더 솔직했던 순간이 있었나요?",
      "처음엔, 이 관계(일)를 잃고 싶지 않았던 이유는 무엇이었나요?",
      "예전의 당신은, 지금보다 무엇을 덜 가졌나요?",
      "처음엔, 기대 없이 시작했던 게 있었나요?",
      "예전엔 더 자주 고마워했던 대상이 있었나요?",
      "처음엔, 이 정도면 행복하다고 느꼈던 순간이 있나요?",
      "예전의 당신은, 무엇을 가장 믿고 있었나요?",
      "처음엔, 설명 없이도 괜찮았던 관계가 있었나요?",
      "예전엔 더 천천히 결정했던 적이 있나요?",
      "처음엔, 잃을까 봐 조심했던 게 무엇이었나요?",
      "예전의 당신이 지금의 당신에게 묻고 싶어 할 질문은 무엇일까요?"
    ];

    const LEVEL_2 = [
      "만약 처음으로 돌아간다면, 다르게 하고 싶은 선택이 있나요?",
      "그때는 몰랐지만, 지금 와서야 보이는 게 있나요?",
      "혹시, 너무 늦었다고 느끼고 있는 건 없나요?",
      "처음엔 지키고 싶었지만 지금은 포기해버린 건 무엇인가요?",
      "지금의 당신은, 누구에게 가장 미안한가요?",
      "처음엔, 이런 사람이 될 거라고 생각하셨나요?",
      "혹시, 너무 익숙해져서 소중함을 잊은 대상이 있나요?",
      "그때의 선택을 지금도 변명하고 있지는 않나요?",
      "처음엔, 끝까지 가고 싶었던 길이 있었나요?",
      "지금의 삶에서 가장 많이 바뀐 건 무엇인가요?",
      "혹시, 당연해져서 상처를 줬던 적은 없나요?",
      "처음엔, 이 정도면 충분하다고 생각했던 적이 있나요?",
      "지금의 당신은, 예전보다 솔직해졌나요, 아니면 조심스러워졌나요?",
      "처음엔, 이 관계를 어떻게 지키고 싶었나요?",
      "혹시, 미루다 놓쳐버린 말이 있나요?",
      "지금 와서야 다시 꺼내고 싶은 감정이 있나요?",
      "처음엔, 이런 방식은 아니라고 생각했던 순간이 있나요?",
      "지금의 당신은, 무엇을 가장 많이 참고 있나요?",
      "혹시, 너무 늦지 않았으면 하는 마음이 있나요?",
      "처음엔, 이만큼만 잃을 거라고 생각하셨나요?",
      "지금도 마음 한편에 남아 있는 장면이 있나요?",
      "처음엔, 끝을 생각하지 않았던 선택이 있나요?",
      "지금의 당신은, 무엇을 가장 후회하고 있나요?",
      "혹시, 이미 놓아버린 줄 알았던 게 있나요?",
      "처음엔, 꼭 지키고 싶었던 약속이 있었나요?",
      "지금 와서야 이해되는 누군가가 있나요?",
      "처음엔, 이렇게까지 멀어질 거라 생각했나요?",
      "지금의 당신은, 예전의 자신을 어떻게 바라보고 있나요?",
      "혹시, 다시 시작해보고 싶은 게 있나요?",
      "처음으로 돌아간다면, 꼭 그대로 두고 싶은 선택도 있나요?"
    ];

    let records = [];
    let meta = { firstSeenAt: null, dayIndex: 0, skipCount: 0, writeCount: 0, lastDate: null };

    function loadData() {
      try {
        const r = localStorage.getItem(LS.RECORDS);
        if (r) records = JSON.parse(r);
      } catch (e) {}
      try {
        const m = localStorage.getItem(LS.META);
        if (m) meta = { ...meta, ...JSON.parse(m) };
      } catch (e) {}
    }

    function saveData() {
      localStorage.setItem(LS.RECORDS, JSON.stringify(records));
      localStorage.setItem(LS.META, JSON.stringify(meta));
    }

    function todayKey() {
      return new Date().toISOString().slice(0, 10);
    }

    function getDayIndex() {
      const today = todayKey();
      if (!meta.firstSeenAt) return 0;
      const a = new Date(meta.firstSeenAt + "T00:00:00").getTime();
      const b = new Date(today + "T00:00:00").getTime();
      return Math.floor((b - a) / 86400000);
    }

    function getTodayQuestion() {
      const dayIdx = getDayIndex();
      if (dayIdx < 7) return FIXED_7[dayIdx];

      const skipRatio = meta.writeCount + meta.skipCount > 0 ? meta.skipCount / (meta.writeCount + meta.skipCount) : 0.5;
      let pool;
      if (skipRatio > 0.6) pool = LEVEL_0;
      else if (skipRatio < 0.3 && meta.writeCount > 5) pool = [...LEVEL_1, ...LEVEL_2];
      else pool = [...LEVEL_0, ...LEVEL_1];

      const idx = Math.floor(Math.random() * pool.length);
      return pool[idx];
    }

    function nextStep(n) {
      if (n === 5) {
        localStorage.setItem(LS.ONBOARDING, "done");
        if (!meta.firstSeenAt) {
          meta.firstSeenAt = todayKey();
          saveData();
        }
      }
      document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
      document.getElementById("step" + n).classList.add("active");
      if (n === 5) {
        meta.dayIndex = getDayIndex();
        document.getElementById("questionText").textContent = getTodayQuestion();
        document.getElementById("answerInput").value = "";
      }
    }

    function saveAndDone() {
      const q = getTodayQuestion();
      const a = document.getElementById("answerInput").value.trim();
      const date = todayKey();

      const existing = records.findIndex(r => r.date === date);
      if (existing >= 0) records.splice(existing, 1);

      records.unshift({ date, question: q, answer: a, skipped: false });
      meta.writeCount = (meta.writeCount || 0) + 1;
      meta.lastDate = date;
      saveData();

      document.getElementById("answerInput").value = "";
      document.getElementById("questionText").textContent = "오늘의 질문을 마쳤습니다.";
      document.querySelector(".btn-row").innerHTML = '<button class="btn primary" onclick="location.reload()">확인</button>';
    }

    function skipToday() {
      const date = todayKey();
      const q = getTodayQuestion();
      const existing = records.findIndex(r => r.date === date);
      if (existing >= 0) records.splice(existing, 1);

      records.unshift({ date, question: q, answer: "", skipped: true });
      meta.skipCount = (meta.skipCount || 0) + 1;
      meta.lastDate = date;
      saveData();

      document.getElementById("questionText").textContent = "넘기셨습니다. 괜찮습니다.";
      document.getElementById("answerInput").style.display = "none";
      document.querySelector(".btn-row").innerHTML = '<button class="btn primary" onclick="location.reload()">확인</button>';
    }

    function openMenu() {
      document.getElementById("menuModal").classList.add("show");
    }

    function closeMenu() {
      document.getElementById("menuModal").classList.remove("show");
    }

    function viewRecords() {
      closeMenu();
      const list = document.getElementById("recordsList");
      list.innerHTML = records.length === 0
        ? '<p class="step-text muted">아직 기록이 없습니다.</p>'
        : records.map(r => `
          <div class="record-item" onclick="showRecord('${r.date}')">
            <span class="date">${r.date}</span>
            ${r.skipped ? '<span style="color:var(--muted)">(넘김)</span>' : ''}
            ${!r.skipped && r.answer ? `<div class="preview">${r.answer.slice(0, 40)}${r.answer.length > 40 ? '…' : ''}</div>` : ''}
          </div>
        `).join("");
      document.getElementById("recordsModal").classList.add("show");
    }

    function showRecord(date) {
      const r = records.find(x => x.date === date);
      if (!r) return;
      const list = document.getElementById("recordsList");
      list.innerHTML = `
        <div class="record-detail">
          <div class="q">${r.question}</div>
          <div class="a">${r.skipped ? '(넘김)' : r.answer || '(비어 있음)'}</div>
        </div>
        <button class="btn ghost" onclick="viewRecords()">목록으로</button>
      `;
    }

    function closeRecords() {
      document.getElementById("recordsModal").classList.remove("show");
    }

    function exportData() {
      const blob = new Blob([JSON.stringify({ records, meta, exportedAt: new Date().toISOString() }, null, 2)], { type: "application/json" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "cheoreomcheoreom-backup-" + todayKey() + ".json";
      a.click();
      URL.revokeObjectURL(a.href);
    }

    function init() {
      loadData();
      const onboarding = localStorage.getItem(LS.ONBOARDING);
      if (onboarding === "done") {
        document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
        document.getElementById("step5").classList.add("active");
        document.getElementById("questionText").textContent = getTodayQuestion();

        const date = todayKey();
        const todayRecord = records.find(r => r.date === date);
        if (todayRecord) {
          document.getElementById("questionText").textContent = "오늘의 질문을 마쳤습니다.";
          document.getElementById("answerInput").style.display = "none";
          document.querySelector(".btn-row").innerHTML = '<button class="btn primary" onclick="location.reload()">확인</button>';
        }
      } else {
        document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
        document.getElementById("step1").classList.add("active");
      }
    }

    init();
  </script>
</body>
</html>
